---
sidebar_position: 2
---

# Основы GraphQL

GraphQL - простой язык для описания типов данных и запросов выполняемых над этими типами.
:::info
Для самостоятельного знакомства с GraphQL, вы можете прочитать официальную [документацию](https://graphql.org/learn/).
:::

## Типы

Типы представляют собой структурированные данные.
Типом может быть пользователь вашего при ложения с именем, возрастом и так далее.
Может быть какое-то сообщение или Твит, если вы разрабатываете свой Твиттер.

Простой тип в GraphQL может выглядеть так:
```graphql
type MyUser {
    id: ID!
    username: String!
    age: Int
}
```
В примере выше мы объявили тип пользователя с несколькими полями - `id`, `username` и `age`, используя встроенные (скалярные) типы `ID`, `String` и `Int`.
Восклицательный знак у типа означает, что это обязательный или *не-нулевой* тип.
Подробнее о типах можно прочитать в [документации](https://graphql.org/learn/schema/).

:::info
deffun поддерживает некоторые сторонние скаляры, вам просто нужно добавить их в свою схему так - `scalar DateTime`:
- DateTime - [спецификация](https://scalars.graphql.org/andimarek/date-time.html)
- Time
- LocalTime
- Date
- UUID
- Locale
- Currency
- Url
- Json
:::

GraphQL поддерживает типы-перечисления - они необходимы, когда ты точно знаешь, что какое-то поле может принимать только одно значение из заданного набора. Например:
```graphql
enum SubscriptionType {
    BLUE_GALOCHKA, RED_ZVEZDOCHKA, NONE
}
type MyUser {
    ...
    subscriptionType: SubscriptionType!
}
```
Теперь у пользователя есть тип подписки, который может принимать одно из 3х значений - `BLUE_GALOCHKA`, `RED_ZVEZDOCHKA`, `NONE`.

Другим полезным типом является *список*. Например:
```graphql
type Tweet {
    ...
    tags: [String!]
}
```
У каждого твита есть список тегов.

Типом поля может быть как скаляр, так и другой тип объявленный в схеме:
```graphql
type MyUser {
    ...
    tweets: [Tweet!]
    followers: [MyUser!]
}
```
Теперь у нашего пользователя есть список твитов и фалловеров.

## Мутации

Мутации - это изменения данных, такие как создание чего-либо, обновление, удаление.
Они объявляются с помощью специального типа `Mutation`.
Объявления мутаций и запросов (ниже) выглядят одинаково - сначала имя мутации/запроса, затем передаваемые аргументы в скобках, после скобок идёт двоеточие и возвращаемый тип.

Примеры мутаций:
```graphql
type Mutation {
    # Создание
    createTweet(body: String!): Tweet!
    # Обновление
    updateTweet(id: ID!, body: String!): Tweet!
    markTweetRead(id: ID!): Boolean!
    # Удаление
    deleteTweet(id: ID!): Boolean!
}
```

## Запросы

Запросы необходимы для получения данных и, в отличии от мутаций, не изменяют данные.
Они объявляются с помощью специального типа `Query`.

Примеры запросов:
```graphql
type Query {
    # Получить твит по ID
    getTweet(id: ID!): Tweet!
    # Получить несколько твитов
    getTweets(limit: Int!): [Tweet!]!
}
```

---
:::info
Некоторые рекомендации для написания GraphQL-схем, а также конвенции о наименовании можно найти на сайте [GraphQL Rules](https://graphql-rules.com/).
:::
